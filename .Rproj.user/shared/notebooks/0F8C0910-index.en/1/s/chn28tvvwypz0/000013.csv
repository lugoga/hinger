"0",""
"0","   "
"0","   quest.tb =  walimu.clean %>% "
"0","      group_by(kiwango_cha_elimu, jinsi) %>% "
"0","      summarise(value = n(), .groups = ""drop"") %>% "
"0","      rename(source = 2, target = 1) %>% "
"0","      filter(value > 100)%>% "
"0","      as.data.frame()"
"0","        "
"0","    "
"0","    # From these flows we need to create a node data frame: it lists every entities involved in the flow"
"0","    nodes <- data.frame(name=c(as.character(quest.tb$source), "
"0","                               as.character(quest.tb$target)) %>% "
"0","                          unique())"
"0","    "
"0","    nodes = quest.tb %>% "
"0","      select(-value) %>% "
"0","      pivot_longer(cols = source:target) %>% "
"0","      distinct(value) %>% "
"0","      rename(name = 1) %>% "
"0","      as.data.frame()"
"0","    "
"0","    # With networkD3, connection must be provided using id, not using real name like in the links dataframe.. So we need to reformat it."
"0","    quest.tb$IDsource=match(quest.tb$source, nodes$name)-1 "
"0","    quest.tb$IDtarget=match(quest.tb$target, nodes$name)-1"
"0","    "
"0","    "
"0","    # Make the Network "
"0","    networkD3::sankeyNetwork(Links = quest.tb, "
"0","                             Nodes = nodes,"
"0","                             Source = ""IDsource"", "
"0","                             Target = ""IDtarget"","
"0","                             Value = ""value"", "
"0","                             NodeID = ""name"", "
"0","                             fontFamily = ""Myriad Pro"","
"0","                             LinkGroup = ""source"","
"0","                             sinksRight=FALSE,"
"0","                             # height = 600, width = 800,"
"0","                             # colourScale=ColourScal,"
"0","                             nodeWidth=30, "
"0","                             iterations = 5,"
"0","                             fontSize=14, "
"0","                             nodePadding=30, "
"0","                             width = 1000, "
"0","                             height = 400)"
